<!DOCTYPE html>
<html lang="en">
<head>
	<title>Battle</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
	
</head>
<body>
	<div class="limiter">
		<div class="container-quickMenu">
			<div class="wrap-quickMenu">
				<ul>
					<li><a href="/frontend/Trelo/index.html" class="Colorir">Home</a></li>
					<li><a href="/frontend/Battle/index.html" class="Colorir">Batalha</a></li>
					<li><a href="/frontend/Costumizacao/index.html" class="Colorir">Customizar</a></li>
					<li><a href="/frontend/Login/index.html" class="Colorir">Sair</a></li>
				</ul>

			</div>
		</div>
		<div class="container-battle">
			<div class="battle-field" id="currentWeatherImage">
				<div class="battle-field__player">
					<div class="battle-field__player__name">
						<h1 class="battle-field__player__name_nick">Notarg</h1>
					</div>
					<div class="battle-field__player__image">
						<img class="battle-field__enemy__image_all" src="images/512per.png" alt="Player 1">
					</div>
				</div>
				<div class="battle-field__enemy">
					<div class="battle-field__enemy__name">
						<h1 class="battle-field__player__name_nick">Portix</h1>
					</div>
					<div class="battle-field__enemy__image">
						<img class="battle-field__enemy__image_all" src="images/512per.png" alt="Player 1">
					</div>
				</div>
			</div>
		</div>
		<div class="button-batlle">
			<button class="button-batlle-b">
				BATALHAR
			</button>
		</div>
		<div class="container-stats100"> 
			<div class="wrap-stats100">
				<div class="stats-menu" data-tilt>
					<ul class="stats-Window">
						<div>
							<a class="name-persono">Janela de Atributos: </a>
							<a id="name" class="person">Nome: Notarg</a>
							<a id="level" class="lv">Level: 1</a>
							<a id="attackDamage" class="attackDamage">Attack Damage: 10</a>
						</div>
					
						<li>
							<a id="xp" class="xp">Experience: 0</a>
							<a class="xp">/</a>
							<a id="xpAmountToLevelUp" class="xp">100</a>
							<div class="container-xp">
								<div class="progress-xp" ></div>
							</div>
						</li>
						<li >
							<a id="hp">Hp: 100</a>
							<a>/</a>
							<a id="baseHp">100</a>
							<div class="container-hp">
								<div class="progress-hp" ></div>
							</div>
						</li>
				
						<li>
							<a id="stamina">Stamina: 10</a>
							<a>/</a>
							<a id="baseStamina">10</a>
							<div class="container-st">
								<div class="progress-st" ></div>
							</div>
						</li>
					</ul>
					
				</div>
				<div class="stats-menu" data-tilt>
					<ul class="stats-Window">
						<div>
							<a class="name-persono">Janela de Atributos: </a>
							<a id="nameEnemy" class="person">Nome: Portix</a>
							<a id="levelEnemy" class="lv">Level: 1</a>
							<a id="attackDamageEnemy" class="attackDamage">Attack Damage: 12</a>
						</div>
					
						<li>
							<a id="xpEnemy" class="xp">Experience: 12</a>
							<a class="xp">/</a>
							<a id="xpAmountToLevelUpEnemy" class="xp">100</a>
							<div class="container-xp-enemy">
								<div class="progress-xp-enemy" ></div>
							</div>
						</li>
						<li >
							<a id="Enemy">Hp: 90</a>
							<a>/</a>
							<a id="baseHpEnemy">100</a>
							<div class="container-hp-enemy">
								<div class="progress-hp-enemy" ></div>
							</div>
						</li>
				
						<li>
							<a id="staminaEnemy">Stamina: 6</a>
							<a>/</a>
							<a id="baseStaminaEnemy">10</a>
							<div class="container-st-enemy">
								<div class="progress-st-enemy" ></div>
							</div>
						</li>
					</ul>
					
				</div>
				
			</div>
			<div class="fundo-falso">
			</div>
					
		</div>
	</div>
</body>
</html>
<script>
	//Weather API
	//key 2451a7026a64d2b7d52cad55f3e33a1b
	// const cityInput = document.querySelector(".city-input");
	// const searchButton = document.querySelector(".search-btn");
	//const locationButton = document.querySelector(".location-btn");
	const API_KEY = "2451a7026a64d2b7d52cad55f3e33a1b"; // API key for OpenWeatherMap API
	const currentWeatherImage = document.getElementById("currentWeatherImage");

	const getWeatherDetails = (cityName, latitude, longitude) => {
		const WEATHER_API_URL = `https://api.openweathermap.org/data/2.5/forecast?lat=${latitude}&lon=${longitude}&appid=${API_KEY}`;

		// Get weather forecast from OpenWeatherMap API
		fetch(WEATHER_API_URL).then(response => response.json()).then(data => {
			// Get the current weather details
			var weather = data.list[0].weather[0].main;
			// currentWeatherImage.src = "images/Clouds.jpg";
			console.log(data.list[0].weather[0].main);
			if(weather === "Clear")
				currentWeatherImage.style.backgroundImage = "url('images/Clear.jpg')";
			else if(weather === "Snow")
				currentWeatherImage.style.backgroundImage = "url('images/Snow.jpg')";
			else if(weather === "Thunderstorm" || weather === "Drizzle" || weather === "Rain") {
				currentWeatherImage.style.backgroundImage = "url('images/Thunderstorm.jpg')";
			}
			else if(weather === "Clouds" || weather === "Mist" || weather === "Smoke" || weather === "Haze" || weather === "Dust" || weather === "Fog" || weather === "Sand" || weather ==="Ash" || weather === "Squall" || weather === "Tornado")
				currentWeatherImage.style.backgroundImage = "url('images/Clouds.jpg')";
			// currentWeatherImage.src = "images/" + weather + ".jpg";
		}).catch(() => {
			alert("An error occurred while fetching the weather forecast! Please allow location access and refresh the page.");
		});
	}

	// NÃ£o vai usar
	const getCityCoordinates = () => {
		const cityName = cityInput.value.trim();
		if (cityName === "") return;
		const API_URL = `https://api.openweathermap.org/geo/1.0/direct?q=${cityName}&limit=1&appid=${API_KEY}`;

		// Get entered city coordinates (latitude, longitude, and name) from the API response
		fetch(API_URL).then(response => response.json()).then(data => {
			if (!data.length) return alert(`No coordinates found for ${cityName}`);
			const { lat, lon, name } = data[0];
			getWeatherDetails(name, lat, lon);
		}).catch(() => {
			alert("An error occurred while fetching the coordinates!");
		});
	}

	const getUserCoordinates = () => {
		navigator.geolocation.getCurrentPosition(
				position => {
					const { latitude, longitude } = position.coords; // Get coordinates of user location
					// Get city name from coordinates using reverse geocoding API
					const API_URL = `https://api.openweathermap.org/geo/1.0/reverse?lat=${latitude}&lon=${longitude}&limit=1&appid=${API_KEY}`;
					fetch(API_URL).then(response => response.json()).then(data => {
						const { name } = data[0];
						getWeatherDetails(name, latitude, longitude);
					}).catch(() => {
						alert("An error occurred while fetching the city name!");
					});
				},
				error => { // Show alert if user denied the location permission
					if (error.code === error.PERMISSION_DENIED) {
						alert("Geolocation request denied. Please allow for background ambiance.");
					} else {
						alert("Geolocation request error. Please reset location permission.");
					}
				});
	}

	getUserCoordinates();
	//locationButton.addEventListener("click", getUserCoordinates);
	//searchButton.addEventListener("click", getCityCoordinates);
	//cityInput.addEventListener("keyup", e => e.key === "Enter" && getCityCoordinates());
</script>
